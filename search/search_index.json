{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"BoMI","text":"BoMI <p> Body Machine Interface (BoMI) is a GUI application for the control of a computer cursor with wearable body sensors. BoMI also implements the StartReact experiments to study spinal cord injury.  </p> <p></p>"},{"location":"#getting-started","title":"Getting Started","text":"<ul> <li>Install BoMI</li> <li>Overview of the BoMI GUI</li> <li>Running a StartReact Experiment</li> </ul>"},{"location":"develop/","title":"Develop","text":""},{"location":"develop/#installing-dev-dependencies","title":"Installing dev dependencies","text":"<p>Development dependencies can be installed with:</p> <pre><code>pip install -e \".[dev]\"\n</code></pre>"},{"location":"develop/#external-sensor-interface","title":"External Sensor Interface","text":"<p>The Yost 3-Space Python API is included in the source code and has been modified for compatibility with Python&gt;=3.8.</p> <p>The Delsys Trigno Control Utility (Delsys SDK Server) must be running on a computer connected to the Delsys base station for the EMG part to work. The <code>trigno_sdk</code> package implements a client to the Delsys SDK, which communicates over TCP. Refer to the Trigno SDK User's Guide document to learn more about its internals.</p>"},{"location":"install/","title":"Install BoMI","text":""},{"location":"install/#1-create-a-virtual-environment-with-conda","title":"1. Create a virtual environment with Conda.","text":"<p>This application requires Python&gt;=3.10, hence we're going to use <code>conda</code> to install a compatible version of Python. On Windows, use the Anaconda Powershell Prompt. If you don't have Anaconda or Miniconda installed, I recommend Miniconda.</p>  $ conda create -y -n bomi python==3.10"},{"location":"install/#2-activate-the-conda-environment","title":"2. Activate the <code>conda</code> environment.","text":"<p>After this, you should see <code>(bomi)</code> in front of your command line prompt.</p>  $ conda activate bomi # (bomi) $$"},{"location":"install/#3-clone-the-git-repo","title":"3. Clone the git repo.","text":"<p>Git with SSH is recommended.</p>  # (bomi) $$ git clone git@github.com:SeanezLab/BoMI-StartReact.git"},{"location":"install/#4-install-the-packages-with-pip","title":"4. Install the packages with pip.","text":"<p>This installs 3 packages: <code>bomi</code>, <code>threespace_api</code> and <code>trigno_sdk</code>.</p> <p>On Windows:</p>  # (bomi) $$ cd BoMI-StartReact # (bomi) $$ python -m pip install .  <p>On MacOS and Linux:</p>  # (bomi) $$ cd BoMI-StartReact # (bomi) $$ python3 -m pip install ."},{"location":"install/#5-start-bomi","title":"5. Start BoMI","text":"<p>To test the installation of BoMI-StartReact, run the command <code>bomi</code>.</p>  # (bomi) $$ bomi  <p>The BoMI window will open.</p> <p></p>"},{"location":"overview/","title":"Overview of the BoMI GUI","text":"<p>The home screen is divided into Group Boxes, grouped by functionality.</p> <p></p> <ul> <li>\"Yost devices\" Widget</li> <li>\"Trigno devices\" Widget</li> <li>StartReact</li> <li>Cursor Tasks</li> <li>Cursor Control</li> </ul>"},{"location":"overview/#yost-devices-widget","title":"\"Yost devices\" Widget","text":"<p>The \"Yost devices\" widget manages the Yost 3-Space Sensors, which provides BoMI with real-time orientation data. Plug the sensors or dongles via USB to the computer, then click \"Discover Devices\" to see a list of devices.</p> <p>\"Tare all devices\" tares all wired and wireless sensors.</p> <p>\"Data charts\" brings up a scope that visualizes orientation data from all connected sensors. Certain columns of the table showing the list of devices are editable:</p> <ul> <li>Nicknames: set a custom name to the devices (e.g., knee, ankle) that will be shown in the scope and in the saved data.</li> <li>Channel: wireless channel of the Yost sensor. Only editable when a wireless sensors is connected through USB.</li> <li>Pan ID: wireless pan ID of the Yost sensor. Only editable when a wireless sensors is connected through USB.</li> </ul> <p>(For a sensor and dongle to pair, they must be using the same Channel and Pan ID. It's easier to set this through the 3-Space Sensor Suite GUI).</p> <p>\"Commit all settings\" commits the edited settings to device. (Nickname is only saved during a BoMI session and not persisted to device)</p> <p>\"Disconnect all\" disconnects from all devices and dongles.</p>"},{"location":"overview/#trigno-devices-widget","title":"\"Trigno devices\" Widget","text":"<p>The \"Trigno devices\" widget manages the Trigno Research System from Delsys. Make sure the Trigno Control Utility (Trigno SDK Server) is running on the computer connected to the Base Station, and the IP address of the computer is entered correctly, then click \"Connect\" to connect to the Base Station.</p> <p>Use the sensor widgets to assign a muscle to each sensor before collecting data.</p>"},{"location":"overview/#startreact","title":"StartReact","text":"<p>This panel allows you to run a StartReact experiment. See Running a StartReact Experiment for more information.</p>"},{"location":"overview/#cursor-tasks-removed-in-v030","title":"Cursor Tasks (removed in v0.3.0)","text":"<p>Implements some cursor tasks that are fun and can quantify accuracy and speed.</p>"},{"location":"overview/#cursor-control-removed-in-v030","title":"Cursor Control (removed in v0.3.0)","text":"<p>Use a Yost device to control the cursor on screen.</p>"},{"location":"start-react/","title":"Running a StartReact Experiment","text":""},{"location":"start-react/#1-activate-bomi","title":"1. Activate BoMI","text":"<p>Start BoMI by activating the conda environment where you installed BoMI-StartReact, then running <code>bomi</code> in your terminal.</p> <pre><code>$ conda activate bomi\n# (bomi) $$ bomi\n</code></pre> <p>The BoMI window will open.</p>"},{"location":"start-react/#2-connect-yost-3-space-sensors","title":"2. Connect Yost 3-Space Sensors","text":"<p>Make sure a Yost 3-Space Sensor or a wireless Dongle paired with a wireless sensor is connected via USB to the computer. (Using a USB connection even for a wireless sensor is recommended, as it significantly improves framerate).</p>"},{"location":"start-react/#a-discover-devices","title":"a. Discover devices","text":"<p>Click \"Discover Devices\". You should see the list of devices.</p> <p></p>"},{"location":"start-react/#b-inspect-real-time-data","title":"b. Inspect real-time data","text":"<p>Click \"Data charts\" in the Yost devices panel  to bring up a scope and inspect the real-time data.</p> <p></p> <p></p> <p>The chart should move as you move the sensor. If nothing shows up, try to reopen the BoMI app and reconnect the devices and the issue normally resolves.</p>"},{"location":"start-react/#3-connect-trigno-emg-sensors","title":"3. Connect Trigno EMG Sensors","text":""},{"location":"start-react/#a-find-the-ip-address-of-the-trigno-sdk","title":"a. Find the IP address of the Trigno SDK","text":"<p>Make sure the Trigno Base Station is connected to a computer, and the Trigno Control Utility (a GUI software that also acts as the Trigno SDK Server) is running on the same computer. Find the local IP address of the Trigno computer by running the following command in its Windows PowerShell:</p>  $ ipconfig  Windows IP Configuration  Ethernet adapter Ethernet:  Connection-specific DNS Suffix . : dhcp.wustl.edu Link-local IPv6 Address . . . . . : fe80::1817:7efc:25b9:6df%14 IPv4 Address. . . . . . . . . . . : 10.229.96.234 Subnet Mask . . . . . . . . . . . : 255.255.255.0 Default Gateway . . . . . . . . . : 10.229.96.254   <p>Look for the Ethernet adapter (preferred if the computer is connected to Ethernet) or the Wireless LAN adaptor. Note down the IPv4 Address - that's the local IP address of the computer. Make sure the Trigno computer and the BoMI computer are on the same subnet (usually if two computers are on the same network [Wi-Fi or otherwise], they are in the same subnet). These two can be the same computer if it's convenient. The local IP address doesn't normally change, so once the machines are setup, you can use the same IP address.</p>"},{"location":"start-react/#b-connect-to-the-trigno-sdk","title":"b. Connect to the Trigno SDK","text":"<p>Set the IPv4 address of the Trigno computer in the BoMI GUI:</p> <p></p> <p>Then click \"Connect\":</p> <p></p> <p>Now you should see all the sensors that are paired with the Trigno Base Station. Set the Muscle name and Side of the sensor (each sensor must be assigned to a unique muscle and side).</p>"},{"location":"start-react/#c-inspect-real-time-data","title":"c. Inspect real-time data","text":"<p>Click on \"Data charts\" to open a new window to inspect the real-time data and make sure EMG placement is correct. You can change the muscle names and sides and then reopen the scope to inspect placement. The scope will automatically place different sides of the same muscle on the same row, and different muscles on different rows.</p> <p> </p>"},{"location":"start-react/#4-configure-startreact","title":"4. Configure StartReact","text":"<p>After the Yost 3-Space Sensors and Trigno EMG Sensors are setup, we can configure StartReact.</p>"},{"location":"start-react/#a-adjust-volume","title":"a. Adjust volume","text":"<p>First, make sure speakers to produce the auditory and startling sound effects are plugged into the computer. Test the tone by clicking on \"Play tone\". Make sure you can achieve a ~115 dB sound with the volume at 100, and ~80 dB with the volume at 1.</p> <p></p>"},{"location":"start-react/#b-set-startreact-configuration","title":"b. Set StartReact configuration","text":"<p>Click on \"Configure\" to bring up a configuration dialog.</p> <p></p> <p></p> <ul> <li>Hold Time: Amount of time one must hold the angle inside the target to count as success.</li> <li>Pause Min: Minimum pause between trials.</li> <li>Pause Random: Max random pause to add on top of Pause Min.</li> <li>No. Trials per cue: Number of trials for each cue. Since there are three cues (visual, auditory, startling), there will be 3x this number of trials in total.</li> <li>Angle Type: Which angle will be used for the StartReact task metrics. Pitch has been a good one to use.</li> </ul>"},{"location":"start-react/#5-run-an-experiment","title":"5. Run an experiment","text":"<p>Finally, click on either StartReact task button to open the experiment interface. The interface for \"Precision\" and \"MaxROM\" are basically identical.</p> <ul> <li>\"Precision\": Precision angle matching task.</li> <li>\"MaxROM\": Max range of motion (ROM) task.</li> </ul> <p></p>"},{"location":"start-react/#a-edit-metadata","title":"a. Edit Metadata","text":"<p>Use the Edit Metadata box to enter data about the subject.</p> <p></p> <ul> <li>Subject Id: De-identified ID of the subject.</li> <li>Joint: Name of the joint (e.g., \"Ankle L\" for left ankle).</li> <li>Max ROM: Max ROM of the subject. Ask the subject to test their max ROM and record it here.</li> <li>Stim: Check this box if electrical stimulation is used for this task.</li> </ul> <p>Click \"Ok\" to save the metadata to file.</p>"},{"location":"start-react/#b-begin-task","title":"b. Begin Task","text":"<p>Click \"Begin task\" to start the experiment! All raw data will be stored to disk (Yost 3-Space Sensor, Trigno EMG, task events, metadata, and configurations etc.)</p> <p></p>"}]}